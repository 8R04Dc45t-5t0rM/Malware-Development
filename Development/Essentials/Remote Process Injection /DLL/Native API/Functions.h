#include "Defs.h"

int GetProcID(const char* ProcName){
    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPALL,0);

    if (snapshot == INVALID_HANDLE_VALUE){
        printf("Error getting Snapshot , %d\n",GetLastError());
        return -1;
    }

    PROCESSENTRY32 current;
    current.dwSize=sizeof(PROCESSENTRY32);

    if (!Process32First(snapshot,&current)){
        printf("Error getting into the snapshot %d",GetLastError());
        return -1;
    }

    while(Process32Next(snapshot,&current)){
        if(strcmpi(current.szExeFile,ProcName)==0){
            printf("Process '%s' ID is %d\n",ProcName, current.th32ProcessID);
            return current.th32ProcessID;
        }
    }

    printf("Process %s NOT FOUND\n",ProcName);
    return -1;
}

